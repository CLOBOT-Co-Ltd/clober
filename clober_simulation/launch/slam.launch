<launch>
  <arg name="model" default="clober"/>
  <arg name="world" default="empty"/>
  <arg name="x_pos" default=" 0.0"/>
  <arg name="y_pos" default=" 0.0"/>
  <arg name="z_pos" default=" 0.0"/>
  <arg name="open_rviz" default="true"/>
  <arg name="open_gazebo" default="true"/>

  <include file="$(find clober_simulation)/launch/include/world/world.launch">
    <arg name="world" value="$(arg world)"/>
    <arg name="open_gazebo" value="$(arg open_gazebo)"/>
  </include>

  <group ns='$(arg model)'>
    <include file="$(find clober_simulation)/launch/include/robot/robot.launch">
      <arg name="model" value="$(arg model)"/>
      <arg name="x_pos" value="$(arg x_pos)"/>
      <arg name="y_pos" value="$(arg y_pos)"/>
      <arg name="z_pos" value="$(arg z_pos)"/>
    </include>

    <include file="$(find clober_slam)/launch/clober_slam.launch">
      <arg name="model" value="$(arg model)"/>
      <arg name="slam_methods" value="gmapping"/>
      <arg name="set_base_frame" value="$(arg model)/base_link"/>
      <arg name="set_odom_frame" value="$(arg model)/odom"/>
      <param name="map_frame"  value="map"/>
    </include>
  </group>

  <group if="$(arg open_rviz)">
    <include file="$(find clober_description)/launch/rviz.launch"/>
  </group>

</launch>
